{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "title": "part schema",
    "type": "object",
    "definitions": {},
    "properties": {
        "parts": {
            "type": "object",
            "minProperties": 1,
            "additionalProperties": false,
            "validation-failure": "{!r} is not a valid part name. Part names consist of lower-case alphanumeric characters, hyphens and plus signs. As a special case, 'plugins' is also not a valid part name.",
            "patternProperties": {
                "^(?!plugins$)[a-z0-9][a-z0-9+-]*$": {
                    "type": [
                        "object",
                        "null"
                    ],
                    "minProperties": 1,
                    "properties": {
                        "plugin": {
                            "type": "string",
                            "description": "plugin name"
                        },
                        "source": {
                            "type": "string"
                        },
                        "source-checksum": {
                            "type": "string",
                            "default": ""
                        },
                        "source-branch": {
                            "type": "string",
                            "default": ""
                        },
                        "source-commit": {
                            "type": "string",
                            "default": ""
                        },
                        "source-depth": {
                            "type": "integer",
                            "default": 0
                        },
                        "source-subdir": {
                            "type": "string",
                            "default": ""
                        },
                        "source-tag": {
                            "type": "string",
                            "default": ""
                        },
                        "source-type": {
                            "type": "string",
                            "default": "",
                            "enum": [
                                "bzr",
                                "git",
                                "hg",
                                "mercurial",
                                "subversion",
                                "svn",
                                "tar",
                                "zip",
                                "deb",
                                "rpm",
                                "7z",
                                "local"
                            ]
                        },
                        "disable-parallel": {
                            "type": "boolean",
                            "default": false
                        },
                        "after": {
                            "type": "array",
                            "minitems": 1,
                            "uniqueItems": true,
                            "items": {
                                "type": "string"
                            },
                            "default": []
                        },
                        "stage-snaps": {
                            "$comment": "For some reason 'default' doesn't work if in the ref",
                            "type": "array",
                            "default": []
                        },
                        "stage-packages": {
                            "$comment": "For some reason 'default' doesn't work if in the ref",
                            "type": "array",
                            "default": []
                        },
                        "build-snaps": {
                            "$comment": "For some reason 'default' doesn't work if in the ref",
                            "type": "array",
                            "default": []
                        },
                        "build-packages": {
                            "$comment": "For some reason 'default' doesn't work if in the ref",
                            "type": "array",
                            "default": []
                        },
                        "build-environment": {
                            "type": "array",
                            "default": [],
                            "minitems": 1,
                            "items": {
                                "type": "object",
                                "minProperties": 1,
                                "maxProperties": 1,
                                "additionalProperties": {
                                    "type": "string"
                                }
                            }
                        },
                        "build-attributes": {
                            "type": "array",
                            "minitems": 1,
                            "uniqueItems": true,
                            "items": {
                                "type": "string",
                                "enum": [
                                    "enable-patchelf",
                                    "no-patchelf",
                                    "no-install",
                                    "debug",
                                    "keep-execstack"
                                ]
                            },
                            "default": []
                        },
                        "organize": {
                            "type": "object",
                            "default": {},
                            "additionalProperties": {
                                "type": "string",
                                "minLength": 1
                            }
                        },
                        "filesets": {
                            "type": "object",
                            "default": {},
                            "additionalProperties": {
                                "type": "array",
                                "minitems": 1
                            }
                        },
                        "stage": {
                            "type": "array",
                            "minitems": 1,
                            "uniqueItems": true,
                            "items": {
                                "type": "string"
                            },
                            "default": [
                                "*"
                            ]
                        },
                        "prime": {
                            "type": "array",
                            "minitems": 1,
                            "uniqueItems": true,
                            "items": {
                                "type": "string"
                            },
                            "default": [
                                "*"
                            ]
                        },
                        "override-pull": {
                            "type": "string"
                        },
                        "override-build": {
                            "type": "string"
                        },
                        "override-stage": {
                            "type": "string"
                        },
                        "override-prime": {
                            "type": "string"
                        },
                        "parse-info": {
                            "type": "array",
                            "minitems": 1,
                            "uniqueItems": true,
                            "items": {
                                "type": "string"
                            },
                            "default": []
                        }
                    }
                }
            }
        }
    },
    "required": [
        "parts"
    ],

    "additionalProperties": true
}
